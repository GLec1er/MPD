# –í–æ–ø—Ä–æ—Å ‚Ññ1 Multithreading –∏ multiprocessing. –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ? –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–æ? –ò –∫–∞–∫ –ø–æ–º–æ–≥–∞–µ—Ç?

### üìå –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:
**Multithreading** ‚Äî —ç—Ç–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

**Multiprocessing** ‚Äî —ç—Ç–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å.

–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã:

–ß—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞ —Å—á—ë—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

1. Multithreading –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –∑–∞–¥–∞—á, –≥–¥–µ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (I/O), –Ω–∞–ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—å—é –∏–ª–∏ —Ñ–∞–π–ª–∞–º–∏.

2. Multiprocessing –Ω—É–∂–µ–Ω –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (CPU-bound –∑–∞–¥–∞—á–∏), –≥–¥–µ –ø–æ—Ç–æ–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã GIL –≤ Python.

–ö–∞–∫ –ø–æ–º–æ–≥–∞–µ—Ç:

1. Multithreading —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –∂–¥—É—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã).

2. Multiprocessing –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è GIL.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏—è:
GIL (Global Interpreter Lock) ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –≤ CPython, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–∞—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ—Ç–æ–∫–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–∞–π—Ç–∫–æ–¥ Python. –ü–æ—ç—Ç–æ–º—É –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏.

CPU-bound ‚Äî –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Å–∫–æ—Ä–æ—Å—Ç—å—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π).

I/O-bound ‚Äî –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (–¥–∏—Å–∫–æ–≤, —Å–µ—Ç–∏).

### üìù –†–µ–∑—é–º–µ:
Multithreading ‚Äî –¥–ª—è I/O –∑–∞–¥–∞—á, –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å, –º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤.
Multiprocessing ‚Äî –¥–ª—è CPU –∑–∞–¥–∞—á, –º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–µ–π –ø–∞–º—è—Ç—å—é.
Multithreading –∂–¥—ë—Ç –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, multiprocessing —Ä–µ–∞–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –æ–±—Ö–æ–¥—è GIL.

–ö–æ–Ω–µ—á–Ω–æ! –°–µ–π—á–∞—Å –ø–æ–∫–∞–∂—É –ø—Ä–æ—Å—Ç–µ–π—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ, –ø–æ–Ω—è—Ç–Ω—ã–µ –∏ —Å—Ä–∞–∑—É –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—â–∏–µ —Å—É—Ç—å. üëá

### üîπ –ü—Ä–∏–º–µ—Ä Multithreading (–¥–ª—è I/O-bound –∑–∞–¥–∞—á):
```python
import threading
import time

def download_file(file_id):
    print(f"Start downloading file {file_id}")
    time.sleep(2)  # –∏–º–∏—Ç–∏—Ä—É–µ–º —Å–µ—Ç–µ–≤—É—é –∑–∞–¥–µ—Ä–∂–∫—É
    print(f"Finished downloading file {file_id}")

threads = []

for i in range(5):
    t = threading.Thread(target=download_file, args=(i,))
    t.start()
    threads.append(t)

for t in threads:
    t.join()

print("All downloads completed.")
```

#### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. –ó–∞–ø—É—Å–∫–∞–µ–º 5 –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

2. –û–Ω–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ "—Å–∫–∞—á–∏–≤–∞—é—Ç" —Ñ–∞–π–ª—ã.

3. –≠–∫–æ–Ω–æ–º–∏–º –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.

### üîπ –ü—Ä–∏–º–µ—Ä Multiprocessing (–¥–ª—è CPU-bound –∑–∞–¥–∞—á):
```python
import multiprocessing
import math

def heavy_computation(number):
    print(f"Processing number {number}")
    math.factorial(50000)  # —Ç—è–∂–µ–ª–∞—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞
    print(f"Finished processing number {number}")

processes = []

for i in range(5):
    p = multiprocessing.Process(target=heavy_computation, args=(i,))
    p.start()
    processes.append(p)

for p in processes:
    p.join()

print("All computations completed.")
```

#### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. –ó–∞–ø—É—Å–∫–∞–µ–º 5 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

2. –ö–∞–∂–¥—ã–π –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –≥—Ä—É–∑–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä.

3. –û–±—Ö–æ–¥–∏–º GIL, —Ä–µ–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

### üöÄ –ß—Ç–æ –≤–∞–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å:
Threading –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è –∑–∞–¥–∞—á —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º (time.sleep, —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã).

Processing –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è —Ç—è–∂—ë–ª–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –ø–∞—Ä—Å–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö).

___

# –í–æ–ø—Ä–æ—Å ‚Ññ2 –†–∞—Å—Å–∫–∞–∂–∏ –ø—Ä–æ —á—Ç–æ —Ç—ã –∑–Ω–∞–µ—à—å –ø—Ä–æ ThreadPoolExecutor –∏ ProcessPoolExecutor. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç? –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω? –ö–∞–∫ –ø–æ–º–æ–≥–∞–µ—Ç –∏ —Å —á–µ–º

## üìå –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:
**ThreadPoolExecutor** –∏ **ProcessPoolExecutor** ‚Äî —ç—Ç–æ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã –ø—É–ª–æ–≤ –ø–æ—Ç–æ–∫–æ–≤ –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏–∑ –º–æ–¥—É–ª—è concurrent.futures.
–û–Ω–∏ –ø–æ–º–æ–≥–∞—é—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å—é –∏ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ—Å—Ç—å—é –ø—Ä–æ—â–µ, —á–µ–º –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç:

ThreadPoolExecutor —Å–æ–∑–¥–∞—ë—Ç –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤. –¢—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –∑–∞–¥–∞—á–∏ –≤ –ø—É–ª, –∞ –ø–æ—Ç–æ–∫–∏ –±–µ—Ä—É—Ç –∏—Ö –∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç.

ProcessPoolExecutor —Å–æ–∑–¥–∞—ë—Ç –ø—É–ª –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ü—Ä–æ—Ü–µ—Å—Å—ã –±–µ—Ä—É—Ç –∑–∞–¥–∞—á–∏ –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

### –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã:

1. –ß—Ç–æ–±—ã –ª–µ–≥–∫–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∑–∞–ø—É—Å–∫–∞, –æ–∂–∏–¥–∞–Ω–∏—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤/–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

2. –û–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–æ—Ä–∫–µ—Ä–æ–≤ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–±–∏—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

### –ö–∞–∫ –ø–æ–º–æ–≥–∞—é—Ç:

1. –£–ø—Ä–æ—â–∞—é—Ç –∫–æ–¥: –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—Ç–æ–∫–∏/–ø—Ä–æ—Ü–µ—Å—Å—ã –≤—Ä—É—á–Ω—É—é.

2. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–∞–≥—Ä—É–∑–∫—É.

3. –ü–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å future –æ–±—ä–µ–∫—Ç–∞–º–∏ (–æ–±–µ—â–∞–Ω–∏—è–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞).

4. –ü–æ–∑–≤–æ–ª—è—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞–±–∏—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏—è:
```submit(func, *args)``` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á—É –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

```map(func, iterable)``` ‚Äî –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É iterable –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

```result()``` ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–¥–∞—á–∏.

**–£ ThreadPoolExecutor –ø–æ—Ç–æ–∫–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç –ø–∞–º—è—Ç—å.**

**–£ ProcessPoolExecutor –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç —Å–≤–æ—é –ø–∞–º—è—Ç—å ‚Üí –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∏–¥—ë—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é pickle).**

### üîπ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:
**ThreadPoolExecutor (–¥–ª—è I/O-bound):**

```python
from concurrent.futures import ThreadPoolExecutor
import time

def fetch_data(site):
    print(f"Fetching {site}")
    time.sleep(2)
    return f"Data from {site}"

sites = ['site1', 'site2', 'site3']

with ThreadPoolExecutor(max_workers=3) as executor:
    results = executor.map(fetch_data, sites)

for result in results:
    print(result)
```

**ProcessPoolExecutor (–¥–ª—è CPU-bound):**

```python
from concurrent.futures import ProcessPoolExecutor
import math

def compute(n):
    print(f"Computing factorial for {n}")
    return math.factorial(n)

numbers = [5000, 6000, 7000]

with ProcessPoolExecutor(max_workers=3) as executor:
    results = executor.map(compute, numbers)

for result in results:
    print(result)
```

### üìù –†–µ–∑—é–º–µ:
ThreadPoolExecutor ‚Äî –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ I/O –≤ –ø–æ—Ç–æ–∫–∞—Ö.
ProcessPoolExecutor ‚Äî –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö.
–û–±–∞ —É–ø—Ä–æ—â–∞—é—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å/–º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π API (submit, map, result).

___

# –í–æ–ø—Ä–æ—Å ‚Ññ3 –†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –≤ –∫–ª—é—á–µ –ø–æ—Ç–æ–∫–æ–≤ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —Ç–æ –µ—Å—Ç—å –ø—Ä–æ event loop i/o bound time.sleeh –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–Ω–æ–µ –∏—Å–ø–æ–ª—å–Ω–µ–Ω–∏–µ

### üìå –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –≤ Python (—á–µ—Ä–µ–∑ asyncio) —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ Event Loop ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –∏–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
#### –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å - –æ–¥–∏–Ω –ø–æ—Ç–æ–ª!

**Event Loop:**

–ü–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—é.

–ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–µ I/O (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ç–µ–≤–æ–π –æ—Ç–≤–µ—Ç, –¥–∏—Å–∫, —Ç–∞–π–º–µ—Ä), Event Loop –≤—Ä–µ–º–µ–Ω–Ω–æ "–æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç" –µ—ë –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏.

–ü–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –±–µ–∑ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.

I/O-bound –∑–∞–¥–∞—á–∏ –∏–¥–µ–∞–ª—å–Ω–æ –ª–æ–∂–∞—Ç—Å—è –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–µ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç.

**–ö–æ—Ä—É—Ç–∏–Ω—ã (async def)** ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å (await) –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è—Ç—å, –∫–æ–≥–¥–∞ –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã —Ä–µ—Å—É—Ä—Å—ã.

–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å await –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ:

```python
await first_task()
await second_task()
```

–ó–∞–¥–∞—á–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –æ–¥–Ω–∞ –∑–∞ –¥—Ä—É–≥–æ–π, –±–µ–∑ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏—è:
–ü–µ—Ä–µ—Ö–≤–∞—Ç Event Loop (–ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –∑–∞—Ö–≤–∞—Ç) –±—ã–≤–∞–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ —Ç–µ—Å—Ç–∞—Ö –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ (FastAPI, pytest-asyncio).

–ò–Ω–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ —Ç–∏–ø–∞ RuntimeError: Event loop is closed ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –∫–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å Event Loop, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è.

–í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å: –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω—ã–π Event Loop.

–†–∞–±–æ—Ç–∞ —Å Event Loop –≤—Ä—É—á–Ω—É—é:

```python
import asyncio

loop = asyncio.new_event_loop()
asyncio.set_event_loop(loop)

result = loop.run_until_complete(my_coroutine())
loop.close()
```

–¢–∞–∫ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å Event Loop –ø—Ä—è–º–æ —Ä—É–∫–∞–º–∏ (—Ö–æ—Ç—è –≤ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–µ —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è asyncio.run()).

### üîπ –ö–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:
```python

import asyncio

async def do_work(name):
    print(f"{name} start")
    await asyncio.sleep(2)  # –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º, –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º Event Loop
    print(f"{name} end")

async def main():
    await asyncio.gather(
        do_work("Task 1"),
        do_work("Task 2"),
        do_work("Task 3"),
    )

asyncio.run(main())
```

–ß—Ç–æ –±—É–¥–µ—Ç: –≤—Å–µ —Ç—Ä–∏ –∑–∞–¥–∞—á–∏ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è –ø–æ—á—Ç–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –∑–∞ 2 —Å–µ–∫—É–Ω–¥—ã, –∞ –Ω–µ –∑–∞ 6.

### üìù –†–µ–∑—é–º–µ:
1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Event Loop: –∑–∞–¥–∞—á–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ I/O, –æ—Å–≤–æ–±–æ–∂–¥–∞—è –ø–æ—Ç–æ–∫.
2. –ö–æ—Ä—É—Ç–∏–Ω—ã (async def) –º–æ–∂–Ω–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ await.
3. time.sleep() –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ç–æ–∫, asyncio.sleep() ‚Äî –Ω–µ—Ç.
4. Event Loop –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å—Å—è, –æ–±—ã—á–Ω–æ –≤ —Ç–µ—Å—Ç–∞—Ö –∏–ª–∏ —Å–ø–µ—Ü. –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.


___

# –í–æ–ø—Ä–æ—Å ‚Ññ4 –ß—Ç–æ —Ç–∞–∫–æ–µ GIL. –î–ª—è —á–µ–≥–æ –æ–Ω –Ω—É–∂–µ–Ω? –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç, –Ω–æ —á—Ç–æ –∏ –ø–ª–æ—Ö–æ–≥–æ –¥–µ–ª–∞–µ—Ç –¥–ª—è –Ω–∞—Å

### üìå –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:
GIL (Global Interpreter Lock) ‚Äî —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –≤ CPython (–æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Python).
GIL —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ—Ç–æ–∫—É –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–∞–π—Ç–∫–æ–¥ Python –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, –¥–∞–∂–µ –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ.

### –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω:

1. –£–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –≤ CPython.

2. –î–µ–ª–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å–±–æ—Ä—â–∏–∫–∞ –º—É—Å–æ—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.

3. –£–ø—Ä–æ—â–∞–µ—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏–µ C-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –ø–æ–¥ Python.

### –ö–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞–µ—Ç:

1. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–±—ä–µ–∫—Ç—ã –≤ –ø–∞–º—è—Ç–∏ –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ—Ä—á–µ–Ω—ã –∏–∑-–∑–∞ –≥–æ–Ω–æ–∫ –ø–æ—Ç–æ–∫–æ–≤.

2. –£–ø—Ä–æ—â–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞, –¥–µ–ª–∞—è –µ–≥–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º.

### –ß—Ç–æ –ø–ª–æ—Ö–æ–≥–æ –¥–µ–ª–∞–µ—Ç –¥–ª—è –Ω–∞—Å:

1. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è CPU-bound –∑–∞–¥–∞—á: –¥–∞–∂–µ –µ—Å–ª–∏ —É —Ç–µ–±—è 8 —è–¥–µ—Ä, Python-–ø–æ—Ç–æ–∫–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —è–¥—Ä–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

2. –î–ª—è —Ç—è–∂—ë–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø–æ—Ç–æ–∫–∏ –º–∞–ª–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã ‚Üí –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å multiprocessing –∏–ª–∏ –ø–∏—Å–∞—Ç—å C-–º–æ–¥—É–ª–∏.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏—è:
I/O-bound –∑–∞–¥–∞—á–∏ –≤—Å—ë –µ—â—ë –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ –ø–æ–¥ GIL, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Ç–æ–∫ –æ—Ç–ø—É—Å–∫–∞–µ—Ç GIL –Ω–∞ –æ–∂–∏–¥–∞–Ω–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.

–ï—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Python –±–µ–∑ GIL, –Ω–∞–ø—Ä–∏–º–µ—Ä, Jython –∏–ª–∏ IronPython, –Ω–æ –æ–Ω–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å–æ –≤—Å–µ–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ CPython.

### üìù –†–µ–∑—é–º–µ:
GIL ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –ø–æ—Ç–æ–∫—É Python-–∫–æ–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
–†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é, –Ω–æ –º–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —è–¥—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö.

___
# –í–æ–ø—Ä–æ—Å ‚Ññ5 –ß—Ç–æ —Ç–∞–∫–æ–µ Lock –∏ Semafore

### üìå –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:
**Lock** –∏ **Semaphore** ‚Äî —ç—Ç–æ –ø—Ä–∏–º–∏—Ç–∏–≤—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ –º–æ–¥—É–ª—è threading, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.

### Lock (threading.Lock):

–ß—Ç–æ —ç—Ç–æ: –ú–µ—Ö–∞–Ω–∏–∑–º "–∑–∞—Ö–≤–∞—Ç–∞" —Ä–µ—Å—É—Ä—Å–∞. –û–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –ª–æ–∫, –∏ –¥—Ä—É–≥–∏–µ –ø–æ—Ç–æ–∫–∏ –±—É–¥—É—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ –ª–æ–∫ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```python
lock.acquire() ‚Äî –ø–æ—Ç–æ–∫ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–∫.

lock.release() ‚Äî –ø–æ—Ç–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –ª–æ–∫.
```

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω: –ß—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö (race conditions), –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–µ–Ω—è—é—Ç –æ–±—â–∏–π –æ–±—ä–µ–∫—Ç.**

### Semaphore (threading.Semaphore):

–ß—Ç–æ —ç—Ç–æ: –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ—Å—É—Ä—Å–æ–º.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–∏—Å–ª–æ–º N.

2. –î–æ N –ø–æ—Ç–æ–∫–æ–≤ –º–æ–≥—É—Ç –∑–∞—Ö–≤–∞—Ç–∏—Ç—å —Å–µ–º–∞—Ñ–æ—Ä.

3. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –±—É–¥—É—Ç –∂–¥–∞—Ç—å –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω: –î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–º—É —á–∏—Å–ª—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.**

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏—è:
Lock ‚Äî —ç—Ç–æ –ø–æ —Å—É—Ç–∏ –±–∏–Ω–∞—Ä–Ω—ã–π —Å–µ–º–∞—Ñ–æ—Ä —Å –æ–¥–Ω–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º (Semaphore(1)).

Lock –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∑–∞—â–∏—Ç—ã –æ–¥–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–∫–∞ –∏–ª–∏ —Å–ª–æ–≤–∞—Ä—è).

Semaphore –ø–æ–¥—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ —É —Ä–µ—Å—É—Ä—Å–∞ –µ—Å—Ç—å –ª–∏–º–∏—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞–∫—Å–∏–º—É–º 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ API.

### üîπ –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:
### Lock:

```python
import threading

lock = threading.Lock()
counter = 0

def safe_increment():
    global counter
    with lock:  # –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ acquire + release
        counter += 1

threads = [threading.Thread(target=safe_increment) for _ in range(100)]

for t in threads:
    t.start()
    for t in threads:
        t.join()

print(counter)  # –≤—Å–µ–≥–¥–∞ 100
```

### Semaphore:

```python
import threading
import time

semaphore = threading.Semaphore(3)  # –º–∞–∫—Å–∏–º—É–º 3 –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

def access_limited_resource(i):
    with semaphore:
        print(f"Thread {i} accessing resource")
        time.sleep(2)

threads = [threading.Thread(target=access_limited_resource, args=(i,)) for i in range(10)]

for t in threads:
    t.start()
    for t in threads:
        t.join()
```

### üìù –ö–æ—Ä–æ—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:
Lock –Ω—É–∂–µ–Ω –¥–ª—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å—É ‚Äî –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç.
Semaphore –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ—Å—É—Ä—Å.
–û–±–∞ –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Å—Ä–µ–¥–µ.


___

# –í–æ–ø—Ä–æ—Å ‚Ññ6 –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–∫–µ–ª–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å postgresql

### üìå –ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:
**–°–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Database Scaling)** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ë–î –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏: –±–æ–ª—å—à–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –¥–∞–Ω–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–ï—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ —Å–∫–µ–π–ª–∏–Ω–≥–∞:

**–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫–µ–π–ª–∏–Ω–≥ (Scaling Up):**

1. –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞ (CPU, RAM, –¥–∏—Å–∫) –¥–ª—è –æ–¥–Ω–æ–π –±–∞–∑—ã.

2. –í —Å–ª—É—á–∞–µ PostgreSQL: –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –ë–î –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—É—é –º–∞—à–∏–Ω—É –∏–ª–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤.

3. –ü—Ä–æ—Å—Ç–æ–π –ø—É—Ç—å, –Ω–æ –µ—Å—Ç—å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–µ–ª.

**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫–µ–π–ª–∏–Ω–≥ (Scaling Out):**

1. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏.

**–í PostgreSQL –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑:**

1. –†–µ–ø–ª–∏–∫–∞—Ü–∏—é (Master ‚Üí Replica) ‚Äî —á—Ç–µ–Ω–∏–µ –∏–¥—ë—Ç —Å —Ä–µ–ø–ª–∏–∫, –∑–∞–ø–∏—Å—å —Ç–æ–ª—å–∫–æ –≤ –º–∞—Å—Ç–µ—Ä.

2. –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º ID.

3. –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –ø–æ—á—Ç–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏—è:
1. –†–µ–ø–ª–∏–∫–∞—Ü–∏—è: –í PostgreSQL —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Streaming Replication.

2. –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏: –ù–∞–ø—Ä–∏–º–µ—Ä, PgBouncer, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –º–∞—Å—Ç–µ—Ä–æ–º –∏ —Ä–µ–ø–ª–∏–∫–∞–º–∏.

3. –®–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, Citus (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PostgreSQL –¥–ª—è —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—è).

–ü—Ä–æ–±–ª–µ–º—ã –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫–µ–π–ª–∏–Ω–≥–∞:

–°–ª–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö.

–†–æ—Å—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

### üîπ –ü—Ä–∏–º–µ—Ä –º–∏–Ω–∏-—Å—Ü–µ–Ω–∞—Ä–∏—è:
–ù–∞ —Å—Ç–∞—Ä—Ç–µ: PostgreSQL –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.

–†–æ—Å—Ç –Ω–∞–≥—Ä—É–∑–∫–∏: —É–≤–µ–ª–∏—á–∏–ª–∏ CPU/RAM (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫–µ–π–ª–∏–Ω–≥).

–î–∞–ª—å—à–µ: –ø–æ–¥–Ω—è–ª–∏ 2 —Ä–µ–ø–ª–∏–∫–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫–µ–π–ª–∏–Ω–≥).

–ü—Ä–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–º —Ä–æ—Å—Ç–µ: —Å–¥–µ–ª–∞–ª–∏ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### üìù –†–µ–∑—é–º–µ:
–°–∫–µ–π–ª–∏–Ω–≥ –±–∞–∑—ã ‚Äî —ç—Ç–æ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π) –∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π).
–í PostgreSQL –æ–±—ã—á–Ω–æ –Ω–∞—á–∏–Ω–∞—é—Ç —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –∫ —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏.


___

# –í–æ–ø—Ä–æ—Å ‚Ññ7 –í —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞ REDIS –∏ Memcached

### üìå –û—Ç–≤–µ—Ç:
Redis –∏ Memcached ‚Äî —ç—Ç–æ –∏–Ω-–º–µ–º–æ—Ä–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω–æ:

#### Redis:

1. –•—Ä–∞–Ω–∏—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–∫–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞, —Ö—ç—à–∏).

2. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –Ω–∞ –¥–∏—Å–∫.

3. –ò–º–µ–µ—Ç –±–æ–≥–∞—Ç—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (Pub/Sub, Lua-—Å–∫—Ä–∏–ø—Ç—ã, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏).

#### Memcached:

1. –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–µ –∫–µ—à-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ: —Ç–æ–ª—å–∫–æ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏).

2. –ë–µ–∑ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏).

3. –û—á–µ–Ω—å –ª—ë–≥–∫–∏–π –∏ –±—ã—Å—Ç—Ä—ã–π –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

### üìö –ö—Ä–∞—Ç–∫–æ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ:
Redis = –∫—ç—à + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π.

Memcached = —Ç–æ–ª—å–∫–æ –∫—ç—à, –º–∏–Ω–∏–º–∞–ª–∏–∑–º –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å.

### üìù –†–µ–∑—é–º–µ:
Redis ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ; Memcached ‚Äî —Ç–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å—Ç–æ–π –∫—ç—à –≤ –ø–∞–º—è—Ç–∏.


___


# –í–æ–ø—Ä–æ—Å ‚Ññ8 –û–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π REDIS. –ß—Ç–æ? –ö–∞–∫? –ò –¥–ª—è —á–µ–≥–æ?

### üìå –û—Ç–≤–µ—Ç:
Redis ‚Äî –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤ –ø–ª–∞–Ω–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –∫–æ–º–∞–Ω–¥. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ –±–µ–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏.

**–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

–í–Ω—É—Ç—Ä–∏ Redis ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π event loop –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (epoll, kqueue, select), –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∫–æ–º–∞–Ω–¥—ã, –æ—Ç–≤–µ—Ç—ã.

–ù–µ—Ç –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏ ‚Äî –≤—Å—ë –∏–¥—ë—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.

### –î–ª—è —á–µ–≥–æ —Å–¥–µ–ª–∞–Ω–æ:

1. –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞: –Ω–µ—Ç –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö (race conditions), –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö (locks, mutex).

2. –°—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ.

3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ –±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π.

### –ß–µ–º –ø–æ–º–æ–≥–∞–µ—Ç:

1. –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è I/O-bound –æ–ø–µ—Ä–∞—Ü–∏–π.

2. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ (latency).

3. –ü—Ä–µ–∫—Ä–∞—Å–Ω–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π.

### –ß–µ–º –≤—Ä–µ–¥–∏—Ç:

1. –õ–∏–º–∏—Ç –≤ –æ–¥–Ω—É –Ω–∏—Ç—å: Redis –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

2. –ï—Å–ª–∏ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —Ç—è–∂—ë–ª–∞—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–æ–ª—å—à–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞), –æ–Ω–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å —Å–µ—Ä–≤–µ—Ä.

3. –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ Redis –∏ —à–∞—Ä–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –Ω–∏–º–∏.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
Redis –≤—Å—ë –∂–µ —É–º–µ–µ—Ç –º—É–ª—å—Ç–∏–ø–æ—Ç–æ—á–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö (4.0+ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ 6.0+) –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—á—Ç–µ–Ω–∏–µ-–∑–∞–ø–∏—Å—å —Å–æ–∫–µ—Ç–æ–≤), –Ω–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –≤—Å—ë –µ—â—ë –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–∞—è.

–ü–æ—ç—Ç–æ–º—É –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ —Å–Ω–∏–º–∞–µ—Ç—Å—è, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π.

### üìù –†–µ–∑—é–º–µ:
Redis –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π –¥–ª—è –∫–æ–º–∞–Ω–¥: —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥, –¥–∞—ë—Ç —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤—ã—Å–æ–∫—É—é —Å–∫–æ—Ä–æ—Å—Ç—å, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ.

___


# –í–æ–ø—Ä–æ—Å ‚Ññ8 –ß—Ç–æ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏ –ø–æ—á–µ–º—É –∫–∞–∫ –∫–ª—é—á –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ Redis


### üìå –û—Ç–≤–µ—Ç:
–í Redis –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ (string), –Ω–æ: –ö–ª—é—á–∏ –≤—Å–µ–≥–¥–∞ ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (bytes –∏–ª–∏ str), —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ.

–ó–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å:

1. –ü—Ä–æ—Å—Ç—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ª—É—á–∞–π),

2. –ò–ª–∏ —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏: —Å–ø–∏—Å–∫–∏ (list), –º–Ω–æ–∂–µ—Å—Ç–≤–∞ (set), —Ö—ç—à–∏ (hash), –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ (sorted set).

### –ü–æ—á–µ–º—É —Å—Ç—Ä–æ–∫–∏:

–°—Ç—Ä–æ–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ (O(1) —á–µ—Ä–µ–∑ —Ö—ç—à-—Ç–∞–±–ª–∏—Ü—É).

–ü–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö: JSON, Pickle, Protobuf –∏ —Ç.–¥.

–£–ø—Ä–æ—â–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–µ–≤–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Redis (RESP).

### –ü–æ—á–µ–º—É —ç—Ç–æ —É–¥–æ–±–Ω–æ:

1. –ì–∏–±–∫–æ—Å—Ç—å: –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø—Ä–æ—Å—Ç—ã–µ —á–∏—Å–ª–∞, –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–∂–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.

2. –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—á—Ç–µ–Ω–∏–µ, –∑–∞–ø–∏—Å—å).

3. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ Redis.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
–ö–ª—é—á–∏ –≤ Redis –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏.

–•–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å—ã –≤ –∫–ª—é—á–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä:
"user:123:profile", "session:456:token".

–ó–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.

### üîπ –ú–∏–Ω–∏-–ø—Ä–∏–º–µ—Ä:
```python
import redis
r = redis.Redis()

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä—ã –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ
r.set('user:1000:name', 'Alice')

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ –∫–ª—é—á—É
name = r.get('user:1000:name')
print(name.decode())  # -> Alice
```

### üìù –†–µ–∑—é–º–µ:
–í Redis –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–∞, –≥–∏–±–∫–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø—Ä–æ—Å—Ç–æ—Ç—É —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

___

# –í–æ–ø—Ä–æ—Å ‚Ññ9 –ö–∞–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ id –≤ postgresql

### üìå –û—Ç–≤–µ—Ç:
–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ –ø–æ id –≤ PostgreSQL –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è –∏–Ω–¥–µ–∫—Å–∞:

–ï—Å–ª–∏ id ‚Äî —ç—Ç–æ PRIMARY KEY (–∞ –∑–Ω–∞—á–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω),
—Ç–æ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ O(log n) –±–ª–∞–≥–æ–¥–∞—Ä—è B-tree –∏–Ω–¥–µ–∫—Å—É.

–ï—Å–ª–∏ –Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–∞ ‚Äî —Ç–æ–≥–¥–∞ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä —Å—Ç—Ä–æ–∫ (Seq Scan), —Å–ª–æ–∂–Ω–æ—Å—Ç—å O(n).

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
B-tree –∏–Ω–¥–µ–∫—Å —É—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ—Ä–µ–≤–æ, –ø–æ–∏—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤.

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ç–∏–ø–∞:

```sql
SELECT * FROM users WHERE id = 123;
```

PostgreSQL –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å), –Ω–∞–π–¥—ë—Ç –∑–∞–ø–∏—Å—å –∑–∞ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –¥–∞–∂–µ –≤ —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ –º–∏–ª–ª–∏–æ–Ω—ã —Å—Ç—Ä–æ–∫.

Seq Scan –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∏–Ω–¥–µ–∫—Å–∞: –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥—Ä—è–¥.

### üìù –†–µ–∑—é–º–µ:
–ü–æ id —Å –∏–Ω–¥–µ–∫—Å–æ–º –≤ PostgreSQL —Å–ª–æ–∂–Ω–æ—Å—Ç—å O(log n) —á–µ—Ä–µ–∑ B-tree.
–ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞ ‚Äî –º–µ–¥–ª–µ–Ω–Ω—ã–π O(n) –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä.

___

# –í–æ–ø—Ä–æ—Å ‚Ññ10 –ö–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ posqtgresql

### üìå –û—Ç–≤–µ—Ç:
–í PostgreSQL –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∏–Ω–¥–µ–∫—Å–æ–≤:

1. B-tree (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –¥–ª—è —Ä–∞–≤–µ–Ω—Å—Ç–≤ (=), –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ (<, >, BETWEEN).

2. Hash –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Å—Ä–∞–≤–Ω–µ–Ω–∏–π (=). –ë—ã—Å—Ç—Ä–µ–µ B-tree –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —Ä–∞–≤–µ–Ω—Å—Ç–≤—É, –Ω–æ –ø–æ—á—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Ä–µ–¥–∫–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ).

3. GIN (Generalized Inverted Index)

–î–ª—è –º–∞—Å—Å–∏–≤–æ–≤, JSONB, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.

–ë—ã—Å—Ç—Ä–æ –∏—â–µ—Ç –ø–æ –Ω–∞–ª–∏—á–∏—é —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö.

4. GiST (Generalized Search Tree)

–î–ª—è –≥–µ–æ–¥–∞–Ω–Ω—ã—Ö (PostGIS), –ø–æ–∏—Å–∫–∞ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º, –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–æ—á–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ).

5. BRIN (Block Range Index)

–î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã.

–õ—ë–≥–∫–∏–π –∏–Ω–¥–µ–∫—Å: —Ö—Ä–∞–Ω–∏—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ/–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –±–ª–æ–∫–æ–≤ —Å—Ç—Ä–æ–∫.

–û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∞—Ä—Ö–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

6. SP-GiST (Space-Partitioned GiST)

–î–ª—è —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã—Ö –∏–ª–∏ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏–ª–∏ —Å–µ—Ç–µ–π.

8. Covering Indexes (INCLUDE)

B-tree –∏–Ω–¥–µ–∫—Å + –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∫–∏ –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Ç–∞–±–ª–∏—Ü–µ.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏–µ:
1. –°–∞–º—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å ‚Äî B-tree. –û–Ω –ø–æ–¥—Ö–æ–¥–∏—Ç –≤ 95% —Å–ª—É—á–∞–µ–≤ (–ø–æ id, –ø–æ –ø–æ–ª—è–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏).

2. –î–ª—è –ø–æ–∏—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ JSON –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç GIN.

3. –î–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü —Å —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ ‚Äî BRIN.

4. –î–ª—è –≥–µ–æ-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö —Ç–æ—á–µ–∫ ‚Äî GiST.

### üìù –†–µ–∑—é–º–µ:
–í PostgreSQL –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –∏–Ω–¥–µ–∫—Å–æ–≤: B-tree, Hash, GIN, GiST, BRIN, SP-GiST.
–ß–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è B-tree –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø–æ–ª—è–º.


___

# –í–æ–ø—Ä–æ—Å ‚Ññ11 –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –±–¥


### üìå –û—Ç–≤–µ—Ç:
–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ë–î –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 3 —É—Ä–æ–≤–Ω—è:

1. –ü—Ä–æ–≤–µ—Ä—å –ø–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ (EXPLAIN ANALYZE)
‚ûî –ü–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –¥–æ–ª–≥–æ: –ø–æ–∏—Å–∫ –ø–æ —Ç–∞–±–ª–∏—Ü–µ, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Ç.–¥.

2. –ü—Ä–æ–≤–µ—Ä—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (pg_locks, pg_stat_activity)
‚ûî –í–æ–∑–º–æ–∂–Ω—ã –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ –æ–∂–∏–¥–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

3. –ü—Ä–æ–≤–µ—Ä—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (CPU, –¥–∏—Å–∫–∏, –ø–∞–º—è—Ç—å)
‚ûî –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –¥–∏—Å–∫ (IOPS) –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –æ—Ç–∫–ª–∏–∫.

### üìö –ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–æ –∫–∞–∂–¥–æ–º—É –ø—É–Ω–∫—Ç—É:
**EXPLAIN ANALYZE**
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞:

```sql
EXPLAIN (ANALYZE, BUFFERS) SELECT * FROM users WHERE id = 123;
```

–°–º–æ—Ç—Ä–∏: –≥–¥–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (Actual Time).

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –¥–æ–ª–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã:**

```sql
SELECT * FROM pg_stat_activity WHERE state = 'active';
SELECT * FROM pg_locks;
```

–°–º–æ—Ç—Ä–∏: –Ω–µ—Ç –ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏–ª–∏ "–≤–∏—Å—è—â–∏—Ö" —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:**
–ò—Å–ø–æ–ª—å–∑—É–π htop, iotop, –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ PostgreSQL (pg_stat_io).

### üìù –ú–∏–Ω–∏-–ø—Ä–∞–∫—Ç–∏–∫–∞ (–∫–∞–∫ –≤—ã–¥–µ–ª–∏—Ç—å—Å—è –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏):
üîπ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫-–ª–∏—Å—Ç:

1. EXPLAIN ANALYZE ‚Üí –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–ª–∞–Ω –∑–∞–ø—Ä–æ—Å–∞?

2. pg_stat_activity ‚Üí –î–æ–ª–≥–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã?

3. pg_locks ‚Üí –ö—Ç–æ –∫–æ–≥–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç?

4. –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ ‚Üí CPU, Disk, Memory?

### üìù –†–µ–∑—é–º–µ:
–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ PostgreSQL:

EXPLAIN ANALYZE ‚Üí –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å,

pg_locks ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏,

–Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä ‚Üí CPU/Disk/Memory.
